# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
## Архитектура и ключевые компоненты

Проект построен по принципу разделения ответственности: каждый модуль отвечает только за свою зону ответственности, это облегчит поддержку, тестирование и развитие приложения.

### Каталог (Catalog)

Хранит и предоставляет данные обо всех товарах, позволяет получать список товаров и показывает отдельно каждый товар по модификатору. Описывается интерфейсами `ICatalog` и `IProduct`.

Расширенный интерфейс `ICatalogModel` устанавливает логику работы с каталогом.

### Корзина (Basket)

Предоставляет возможность добавлять и удалять товар, хранит элементы корзины. Действия с корзиной и ее возможности описаны через базовые интерфейсы `IBasketItem`, `IBasket`

Расширенная версия интерфейса `IBasketModel` отвечает за функциональность корзины.

### Оформление заказа (Order)

Собирает и валидирует данные пользователя (`IForm`, `IOrder`, `IUser`), обеспечивает переход к оплате, сохраняет информацию о способе оплаты, адресе, email и телефоне пользователя;

### EventEmitter

Событийный брокер и перечисление событий, с которыми работает приложение. Позволяет подписываться на события и отправлять оповещения между частями приложения, реализует шаблон “наблюдатель”. Таким образом, при добавлении товара в корзину, UI будет обновлять счетчик товара и уведомлять (показывать) пользователя.

У класса будут прописаны методы `on`, `off` и `emit`. On(event, listener) - подписка на событие, off - соответственно, отписка, и emit - вызов события. 

Примеры событий, которые будут реализованы в коде:

- `catalog:loaded` — загрузился каталог товаров
- `product:select` — пользователь открыл карточку товара
- `basket:add` — добавлен товар в корзину
- и т.д.

### API-клиент (LarekApi)

Обеспечивает запросы к серверу для получения каталога товаров и отправки заказа.

Класс LarekApi реализует API-клиент и обеспечит получение каталога товаров (`getItems`) и оформление заказов (`createOrder`). Всё сетевое взаимодействие с сервером инкапсулировано в этом классе.

В проекте также используется универсальный дженерик-тип `ApiListResponse<T>`, который позволяет типизировать ответы API, возвращающие коллекции данных.

**Структура ответа включает:**

- `total` — общее количество элементов;
- `items` — массив элементов типа `T`

**Пример использования:**

- Для списка товаров: `ApiListResponse<IProduct>`
- Для списка заказов: `ApiListResponse<IOrder>`

### Интерфейсы для отображения

`IView` - отвечает за отображение товаров на странице, а интерфейс `IViewConstructor` послужит для универсального создания интерфейсных компонентов.

Архитектура реализует принципы Model-View-Presenter (MVP), где данные, логика и отображение разделены и взаимодействуют между собой через событийную систему (EventEmitter). Это позволяет поддерживать, тестировать и при желании масштабировать проект.
